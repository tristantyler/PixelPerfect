(this["webpackJsonppixel-perfect"]=this["webpackJsonppixel-perfect"]||[]).push([[0],{267:function(e,a,t){},268:function(e,a,t){"use strict";t.r(a);var c=t(0),o=t.n(c),l=t(19),n=t.n(l),i=t(93),r=(t(267),t(271)),s=t(272);let f=[],d=[];const h=(e,a,t,c)=>{const o={x:Math.floor((e.clientX-a.rect.left)/a.size),y:Math.floor((e.clientY-a.rect.top)/a.size)};switch(t){case"fill":return o.x>=0&&o.x<a.canvasWidth&&o.y>=0&&o.y<a.canvasHeight&&c!==m(o,a)&&(f.push({color:m(o,a),prevColor:c,location:o,alpha:b(o,a),fill:!0}),g(o,c,a,a.canvasWidth/a.size,a.canvasHeight/a.size)),{colorSelect:c,tool:t};case"draw":return f.push({color:m(o,a),prevColor:c,location:o,alpha:b(o,a)}),a.ctx.fillStyle=c,a.ctx.fillRect(o.x*a.size,o.y*a.size,a.size,a.size),{colorSelect:c,tool:t};case"undo":if(f.length>0){if(f[f.length-1].fill)return f[f.length-1].alpha?g(f[f.length-1].location,f[f.length-1].color,a,a.canvasWidth/a.size,a.canvasHeight/a.size):g(f[f.length-1].location,"alpha",a,a.canvasWidth/a.size,a.canvasHeight/a.size),f.pop(),{colorSelect:c,tool:t="draw"};f[f.length-1].alpha?(a.ctx.fillStyle=f[f.length-1].color,a.ctx.fillRect(f[f.length-1].location.x*a.size,f[f.length-1].location.y*a.size,a.size,a.size),d.push({color:f[f.length-1].prevColor,location:f[f.length-1].location,alpha:f[f.length-1].alpha})):(a.ctx.clearRect(f[f.length-1].location.x*a.size,f[f.length-1].location.y*a.size,a.size,a.size),d.push({color:f[f.length-1].prevColor,location:f[f.length-1].location,alpha:0})),f.pop()}return{colorSelect:c,tool:t="draw"};case"redo":return d.length>0&&(a.ctx.fillStyle=d[d.length-1].color,a.ctx.fillRect(d[d.length-1].location.x*a.size,d[d.length-1].location.y*a.size,a.size,a.size),d.pop()),{colorSelect:c,tool:t="draw"};case"mirror":let e=a.canvasWidth/a.size-o.x-1;return f.push({color:m(o,a),prevColor:c,location:o}),f.push({color:m(o,a),prevColor:c,location:{x:e,y:o.y}}),a.ctx.fillStyle=c,a.ctx.fillRect(o.x*a.size,o.y*a.size,a.size,a.size),a.ctx.fillRect(e*a.size,o.y*a.size,a.size,a.size),{colorSelect:c,tool:t};case"erase":const l=b(o,a);return l&&(f.push({color:m(o,a),prevColor:c,location:o,alpha:l}),a.ctx.clearRect(o.x*a.size,o.y*a.size,a.size,a.size)),{colorSelect:c,tool:t};case"picker":return{colorSelect:c=b(o,a),tool:t="draw"};default:return a.ctx.clearRect(0,0,a.canvasWidth,a.canvasHeight),{colorSelect:c,tool:t}}},m=(e,a)=>{const t=a.ctx.getImageData(e.x*a.size,e.y*a.size,1,1).data;return"#"+("000000"+((e,a,t)=>{if(e>255||a>255||t>255)throw"Invalid color component";return(e<<16|a<<8|t).toString(16)})(t[0],t[1],t[2])).slice(-6)},b=(e,a)=>a.ctx.getImageData(e.x*a.size,e.y*a.size,1,1).data[3],g=(e,a,t,c,o)=>{let l=[];for(l.push(e),l.push(e),l.push(e),l.push(e);l.length>0;){l=l.filter((e,a,t)=>t.findIndex(a=>a.x===e.x&&a.y===e.y)===a);const n=l.shift(),i=m(n,t);"alpha"===a?t.ctx.clearRect(n.x*t.size,n.y*t.size,t.size,t.size):(t.ctx.fillStyle=a,t.ctx.fillRect(n.x*t.size,n.y*t.size,t.size,t.size));const r={x:n.x-1,y:n.y},s=m(r,t),f={x:n.x+1,y:n.y},d=m(f,t),h={x:n.x,y:n.y-1},b=m(h,t),g={x:n.x,y:n.y+1},p=m(g,t);r.x>=0&&s===i&&l.push(r),f.x<c&&e.x!==c&&d===i&&l.push(f),h.y>=0&&b===i&&l.push(h),g.y<o&&e.y!==o&&p===i&&l.push(g)}};let p="#ff0000",u="draw",v=!1;const x=["#ffebee","#ffcdd2","#ef9a9a","#e57373","#ef5350","#f44336","#e53935","#d32f2f","#c62828","#b71c1c","#fce4ec","#f8bbd0","#f48fb1","#f06292","#ec407a","#e91e63","#d81b60","#c2185b","#ad1457","#880e4f","#f3e5f5","#e1bee7","#ce93d8","#ba68c8","#ab47bc","#9c27b0","#8e24aa","#7b1fa2","#6a1b9a","#4a148c","#ede7f6","#d1c4e9","#b39ddb","#9575cd","#7e57c2","#673ab7","#5e35b1","#512da8","#4527a0","#311b92","#e8eaf6","#c5cae9","#9fa8da","#7986cb","#5c6bc0","#3f51b5","#3949ab","#303f9f","#283593","#1a237e","#e3f2fd","#bbdefb","#90caf9","#64b5f6","#42a5f5","#2196f3","#1e88e5","#1976d2","#1565c0","#0d47a1","#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b","#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064","#e0f2f1","#b2dfdb","#80cbc4","#4db6ac","#26a69a","#009688","#00897b","#00796b","#00695c","#004d40","#e8f5e9","#c8e6c9","#a5d6a7","#81c784","#66bb6a","#4caf50","#43a047","#388e3c","#2e7d32","#1b5e20","#f1f8e9","#dcedc8","#c5e1a5","#aed581","#9ccc65","#8bc34a","#7cb342","#689f38","#558b2f","#33691e","#f9fbe7","#f0f4c3","#e6ee9c","#dce775","#d4e157","#cddc39","#c0ca33","#afb42b","#9e9d24","#827717","#fffde7","#fff9c4","#fff59d","#fff176","#ffee58","#ffeb3b","#fdd835","#fbc02d","#f9a825","#f57f17","#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00","#fff3e0","#ffe0b2","#ffcc80","#ffb74d","#ffa726","#ff9800","#fb8c00","#f57c00","#ef6c00","#e65100","#fbe9e7","#ffccbc","#ffab91","#ff8a65","#ff7043","#ff5722","#f4511e","#e64a19","#d84315","#bf360c","#efebe9","#d7ccc8","#bcaaa4","#a1887f","#8d6e63","#795548","#6d4c41","#5d4037","#4e342e","#3e2723","#fafafa","#f5f5f5","#eeeeee","#e0e0e0","#bdbdbd","#9e9e9e","#757575","#616161","#424242","#212121","#eceff1","#cfd8dc","#b0bec5","#90a4ae","#78909c","#607d8b","#546e7a","#455a64","#37474f","#263238","#ffffff","#000000"];var y=()=>{window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimaitonFrame||function(e){window.setTimeout(e,1e3/60)};let e,a,t,c,l,n={},f=!1,d={};document.addEventListener("DOMContentLoaded",()=>{console.log("started"),e=document.getElementById("canvas"),a=e.getContext("2d"),t=e.getBoundingClientRect(),c=document.getElementById("gridcanvas"),l=c.getContext("2d"),d={canvas:e,ctx:a,rect:t,canvasWidth:400,canvasHeight:400,size:25},console.log(d),e.addEventListener("touchstart",b,!1),e.addEventListener("touchend",g,!1),e.addEventListener("touchcancel",g,!1),e.addEventListener("touchmove",y,!1),e.addEventListener("mousedown",z,!1),e.addEventListener("mouseup",E,!1),e.addEventListener("mousemove",w,!1),e.addEventListener("mouseleave",E,!1)});const b=e=>{const c=e.touches[0],o={x:Math.floor((c.clientX-t.left)/25),y:Math.floor((c.clientY-t.top)/25)},l=m(o,d);if(console.log("touch start",o,a),v=!0,l!==p||"erase"===u){n=o;const a=h(e,d,u,p);p=a.colorSelect,u=a.tool}},g=e=>{console.log("touch end"),e.preventDefault(),v=!1},y=e=>{if(v){const c=e.touches[0],o={x:Math.floor((c.clientX-t.left)/25),y:Math.floor((c.clientY-t.top)/25)},l=m(o,d);if(console.log("touch move",o,a),(l!==p||"erase"===u)&&(n.x!==o.x||n.y!==o.y||"erase"===u)){n=o;const a=h(e,d,u,p);p=a.colorSelect,u=a.tool}}},z=e=>{const c={x:Math.floor((e.clientX-t.left)/25),y:Math.floor((e.clientY-t.top)/25)},o=m(c,d);if(v=!0,console.log("mouse",c,a),o!==p||"erase"===u){n=c;const a=h(e,d,u,p);p=a.colorSelect,u=a.tool}},E=e=>{v=!1},w=e=>{if(v){const a={x:Math.floor((e.clientX-t.left)/25),y:Math.floor((e.clientY-t.top)/25)};if((m(a,d)!==p||"erase"===u)&&(n.x!==a.x||n.y!==a.y||"erase"===u)){n=a;const t=h(e,d,u,p);p=t.colorSelect,u=t.tool}}};return o.a.createElement("div",null,o.a.createElement(r.a,{bg:"light",expand:"lg"},o.a.createElement(r.a.Brand,{href:"#home"},"Pixel Perfect by MemeLords"),o.a.createElement(r.a.Toggle,{"aria-controls":"basic-navbar-nav"})),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"leftcolumn"},o.a.createElement("div",{className:"card"},o.a.createElement(i.GithubPicker,{color:p,width:275,colors:x,triangle:"hide",onChangeComplete:e=>{p=e.hex}})),o.a.createElement("div",{className:"card"},o.a.createElement("span",null,o.a.createElement(s.a,{variant:"primary",className:"padding",onClick:()=>{u="draw"}},"Draw"),o.a.createElement(s.a,{variant:"danger",className:"padding",onClick:()=>{u="erase"}},"Erase"),o.a.createElement(s.a,{variant:"primary",className:"padding",onClick:()=>{u="fill"}},"Fill"),o.a.createElement(s.a,{variant:"primary",className:"padding",onClick:()=>{u="picker"}},"Picker")),o.a.createElement("span",null,o.a.createElement(s.a,{variant:"warning",className:"padding",onClick:e=>{(e=>{u="undo";const a=h(e,d,u,p);p=a.colorSelect,u=a.tool})(e)}},"Undo"),o.a.createElement(s.a,{variant:"success",className:"padding",onClick:e=>{(e=>{u="redo";const a=h(e,d,u,p);p=a.colorSelect,u=a.tool})(e)}},"Redo"),o.a.createElement("a",{id:"saveButton",download:"my-image"},o.a.createElement(s.a,{variant:"info",className:"padding",onClick:()=>{(()=>{const e=document.getElementById("canvas");document.getElementById("saveButton").href=e.toDataURL()})()}},"Save Image"))),o.a.createElement(s.a,{variant:"primary",className:"padding",onClick:()=>{u="mirror"}},"Mirror"))),o.a.createElement("div",{className:"rightcolumn"},o.a.createElement("div",{className:"card"},o.a.createElement("canvas",{width:400,height:400,id:"gridcanvas"}),o.a.createElement("canvas",{width:400,height:400,className:"app",id:"canvas",style:{cursor:"crosshair"}})),o.a.createElement("div",{className:"card"},o.a.createElement("span",null,o.a.createElement(s.a,{variant:"info",className:"padding",onClick:()=>{(()=>{if(l.clearRect(0,0,400,400),f)f=!1;else{f=!0;for(let e=0;e<=16;e++)l.beginPath(),l.moveTo(25*e,0),l.lineTo(25*e,400),l.strokeStyle="#000000",l.stroke();for(let e=0;e<=16;e++)l.beginPath(),l.moveTo(0,25*e),l.lineTo(400,25*e),a.strokeStyle="#000000",l.stroke()}})()}},"Toggle Grid"),o.a.createElement("span",{className:"clear"},o.a.createElement(s.a,{variant:"danger",className:"padding",onClick:()=>{u=(e=>(e.ctx.clearRect(0,0,e.canvasWidth,e.canvasHeight),"draw"))(d)}},"Clear")))))))};const z=document.getElementById("root");n.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(y,null)),z)},97:function(e,a,t){e.exports=t(268)}},[[97,1,2]]]);
//# sourceMappingURL=main.850b403b.chunk.js.map