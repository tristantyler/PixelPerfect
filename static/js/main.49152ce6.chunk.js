(this["webpackJsonppixel-perfect"]=this["webpackJsonppixel-perfect"]||[]).push([[0],{267:function(e,a,t){},268:function(e,a,t){"use strict";t.r(a);var c=t(0),l=t.n(c),o=t(19),n=t.n(o),i=t(93),r=(t(267),t(271)),s=t(272);let f=[],d=[];const h=(e,a,t,c)=>{const l={x:Math.floor((e.clientX-a.rect.left)/a.size),y:Math.floor((e.clientY-a.rect.top)/a.size)};switch(t){case"fill":return l.x>=0&&l.x<a.canvasWidth&&l.y>=0&&l.y<a.canvasHeight&&c!==m(l,a)&&(f.push({color:m(l,a),prevColor:c,location:l,alpha:u(l,a),fill:!0}),p(l,c,a,a.canvasWidth/a.size,a.canvasHeight/a.size)),{colorSelect:c,tool:t};case"draw":return f.push({color:m(l,a),prevColor:c,location:l,alpha:u(l,a)}),a.ctx.fillStyle=c,a.ctx.fillRect(l.x*a.size,l.y*a.size,a.size,a.size),{colorSelect:c,tool:t};case"undo":if(f.length>0){if(f[f.length-1].fill)return f[f.length-1].alpha?p(f[f.length-1].location,f[f.length-1].color,a,a.canvasWidth/a.size,a.canvasHeight/a.size):p(f[f.length-1].location,"alpha",a,a.canvasWidth/a.size,a.canvasHeight/a.size),f.pop(),{colorSelect:c,tool:t="draw"};f[f.length-1].alpha?(a.ctx.fillStyle=f[f.length-1].color,a.ctx.fillRect(f[f.length-1].location.x*a.size,f[f.length-1].location.y*a.size,a.size,a.size),d.push({color:f[f.length-1].prevColor,location:f[f.length-1].location,alpha:f[f.length-1].alpha})):(a.ctx.clearRect(f[f.length-1].location.x*a.size,f[f.length-1].location.y*a.size,a.size,a.size),d.push({color:f[f.length-1].prevColor,location:f[f.length-1].location,alpha:0})),f.pop()}return{colorSelect:c,tool:t="draw"};case"redo":return d.length>0&&(a.ctx.fillStyle=d[d.length-1].color,a.ctx.fillRect(d[d.length-1].location.x*a.size,d[d.length-1].location.y*a.size,a.size,a.size),d.pop()),{colorSelect:c,tool:t="draw"};case"mirror":let e=a.canvasWidth/a.size-l.x-1;return f.push({color:m(l,a),prevColor:c,location:l}),f.push({color:m(l,a),prevColor:c,location:{x:e,y:l.y}}),a.ctx.fillStyle=c,a.ctx.fillRect(l.x*a.size,l.y*a.size,a.size,a.size),a.ctx.fillRect(e*a.size,l.y*a.size,a.size,a.size),{colorSelect:c,tool:t};case"erase":const o=u(l,a);return o&&(f.push({color:m(l,a),prevColor:c,location:l,alpha:o}),a.ctx.clearRect(l.x*a.size,l.y*a.size,a.size,a.size)),{colorSelect:c,tool:t};case"picker":return{colorSelect:c=u(l,a),tool:t="draw"};default:return a.ctx.clearRect(0,0,a.canvasWidth,a.canvasHeight),{colorSelect:c,tool:t}}},m=(e,a)=>{const t=a.ctx.getImageData(e.x*a.size,e.y*a.size,1,1).data;return"#"+("000000"+((e,a,t)=>{if(e>255||a>255||t>255)throw"Invalid color component";return(e<<16|a<<8|t).toString(16)})(t[0],t[1],t[2])).slice(-6)},u=(e,a)=>a.ctx.getImageData(e.x*a.size,e.y*a.size,1,1).data[3],p=(e,a,t,c,l)=>{let o=[];for(o.push(e),o.push(e),o.push(e),o.push(e);o.length>0;){o=o.filter((e,a,t)=>t.findIndex(a=>a.x===e.x&&a.y===e.y)===a);const n=o.shift(),i=m(n,t);"alpha"===a?t.ctx.clearRect(n.x*t.size,n.y*t.size,t.size,t.size):(t.ctx.fillStyle=a,t.ctx.fillRect(n.x*t.size,n.y*t.size,t.size,t.size));const r={x:n.x-1,y:n.y},s=m(r,t),f={x:n.x+1,y:n.y},d=m(f,t),h={x:n.x,y:n.y-1},u=m(h,t),p={x:n.x,y:n.y+1},b=m(p,t);r.x>=0&&s===i&&o.push(r),f.x<c&&e.x!==c&&d===i&&o.push(f),h.y>=0&&u===i&&o.push(h),p.y<l&&e.y!==l&&b===i&&o.push(p)}},b=["#ffebee","#ffcdd2","#ef9a9a","#e57373","#ef5350","#f44336","#e53935","#d32f2f","#c62828","#b71c1c","#fce4ec","#f8bbd0","#f48fb1","#f06292","#ec407a","#e91e63","#d81b60","#c2185b","#ad1457","#880e4f","#f3e5f5","#e1bee7","#ce93d8","#ba68c8","#ab47bc","#9c27b0","#8e24aa","#7b1fa2","#6a1b9a","#4a148c","#ede7f6","#d1c4e9","#b39ddb","#9575cd","#7e57c2","#673ab7","#5e35b1","#512da8","#4527a0","#311b92","#e8eaf6","#c5cae9","#9fa8da","#7986cb","#5c6bc0","#3f51b5","#3949ab","#303f9f","#283593","#1a237e","#e3f2fd","#bbdefb","#90caf9","#64b5f6","#42a5f5","#2196f3","#1e88e5","#1976d2","#1565c0","#0d47a1","#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b","#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064","#e0f2f1","#b2dfdb","#80cbc4","#4db6ac","#26a69a","#009688","#00897b","#00796b","#00695c","#004d40","#e8f5e9","#c8e6c9","#a5d6a7","#81c784","#66bb6a","#4caf50","#43a047","#388e3c","#2e7d32","#1b5e20","#f1f8e9","#dcedc8","#c5e1a5","#aed581","#9ccc65","#8bc34a","#7cb342","#689f38","#558b2f","#33691e","#f9fbe7","#f0f4c3","#e6ee9c","#dce775","#d4e157","#cddc39","#c0ca33","#afb42b","#9e9d24","#827717","#fffde7","#fff9c4","#fff59d","#fff176","#ffee58","#ffeb3b","#fdd835","#fbc02d","#f9a825","#f57f17","#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00","#fff3e0","#ffe0b2","#ffcc80","#ffb74d","#ffa726","#ff9800","#fb8c00","#f57c00","#ef6c00","#e65100","#fbe9e7","#ffccbc","#ffab91","#ff8a65","#ff7043","#ff5722","#f4511e","#e64a19","#d84315","#bf360c","#efebe9","#d7ccc8","#bcaaa4","#a1887f","#8d6e63","#795548","#6d4c41","#5d4037","#4e342e","#3e2723","#fafafa","#f5f5f5","#eeeeee","#e0e0e0","#bdbdbd","#9e9e9e","#757575","#616161","#424242","#212121","#eceff1","#cfd8dc","#b0bec5","#90a4ae","#78909c","#607d8b","#546e7a","#455a64","#37474f","#263238","#ffffff","#000000"];var g=()=>{window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimaitonFrame||function(e){window.setTimeout(e,1e3/60)};let e,a,t,c,o,n={},f=!1,d={},u="#ff0000",p="draw",g=!1;document.addEventListener("DOMContentLoaded",()=>{e=document.getElementById("canvas"),a=e.getContext("2d"),t=e.getBoundingClientRect(),c=document.getElementById("gridcanvas"),o=c.getContext("2d"),d={canvas:e,ctx:a,rect:t,canvasWidth:400,canvasHeight:400,size:25},document.getElementById("testTouch").addEventListener("touchstart",()=>{alert("This is a touch event")},!1),e.addEventListener("touchstart",v,!1),e.addEventListener("touchend",x,!1),e.addEventListener("touchcancel",x,!1),e.addEventListener("touchmove",y,!1),e.addEventListener("mousedown",z,!1),e.addEventListener("mouseup",E,!1),e.addEventListener("mousemove",w,!1),e.addEventListener("mouseleave",E,!1)});const v=e=>{const a=e.touches[0],c={x:Math.floor((a.clientX-t.left)/25),y:Math.floor((a.clientY-t.top)/25)};alert("touch"+c.x+","+c.y);const l=m(c,d);if(console.log("touch start",c),g=!0,l!==u||"erase"===p){n=c;const e=h(a,d,p,u);u=e.colorSelect,p=e.tool}},x=e=>{e.cancelable&&e.preventDefault(),g=!1},y=e=>{if(g){const a=e.touches[0],c={x:Math.floor((a.clientX-t.left)/25),y:Math.floor((a.clientY-t.top)/25)};if((m(c,d)!==u||"erase"===p)&&(n.x!==c.x||n.y!==c.y||"erase"===p)){n=c;const e=h(a,d,p,u);u=e.colorSelect,p=e.tool}}},z=e=>{const a={x:Math.floor((e.clientX-t.left)/25),y:Math.floor((e.clientY-t.top)/25)},c=m(a,d);if(alert("mouse"+a.x+","+a.y),g=!0,c!==u||"erase"===p){n=a;const t=h(e,d,p,u);u=t.colorSelect,p=t.tool}},E=e=>{g=!1},w=e=>{if(g){const a={x:Math.floor((e.clientX-t.left)/25),y:Math.floor((e.clientY-t.top)/25)};if((m(a,d)!==u||"erase"===p)&&(n.x!==a.x||n.y!==a.y||"erase"===p)){n=a;const t=h(e,d,p,u);u=t.colorSelect,p=t.tool}}};return l.a.createElement("div",null,l.a.createElement(r.a,{bg:"light",expand:"lg"},l.a.createElement(r.a.Brand,{href:"#home"},"Pixel Perfect by MemeLords"),l.a.createElement(r.a.Toggle,{"aria-controls":"basic-navbar-nav"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"leftcolumn"},l.a.createElement("div",{className:"card"},l.a.createElement(i.GithubPicker,{color:u,width:275,colors:b,triangle:"hide",onChangeComplete:e=>{u=e.hex}})),l.a.createElement("div",{className:"card"},l.a.createElement("span",null,l.a.createElement(s.a,{variant:"primary",className:"padding",onClick:()=>{p="draw"}},"Draw"),l.a.createElement(s.a,{variant:"danger",className:"padding",onClick:()=>{p="erase"}},"Erase"),l.a.createElement(s.a,{variant:"primary",className:"padding",onClick:()=>{p="fill"}},"Fill"),l.a.createElement(s.a,{variant:"primary",className:"padding",onClick:()=>{p="picker"}},"Picker")),l.a.createElement("span",null,l.a.createElement(s.a,{variant:"warning",className:"padding",onClick:e=>{(e=>{p="undo";const a=h(e,d,p,u);u=a.colorSelect,p=a.tool})(e)}},"Undo"),l.a.createElement(s.a,{variant:"success",className:"padding",onClick:e=>{(e=>{p="redo";const a=h(e,d,p,u);u=a.colorSelect,p=a.tool})(e)}},"Redo"),l.a.createElement("a",{id:"saveButton",download:"my-image"},l.a.createElement(s.a,{variant:"info",className:"padding",onClick:()=>{(()=>{const e=document.getElementById("canvas");document.getElementById("saveButton").href=e.toDataURL()})()}},"Save Image"))),l.a.createElement(s.a,{variant:"primary",className:"padding",onClick:()=>{p="mirror"}},"Mirror"),l.a.createElement(s.a,{variant:"primary",id:"testTouch",className:"padding",onClick:()=>{}},"Test Touch"))),l.a.createElement("div",{className:"rightcolumn"},l.a.createElement("div",{className:"card"},l.a.createElement("canvas",{width:400,height:400,id:"gridcanvas"}),l.a.createElement("canvas",{width:400,height:400,className:"app",id:"canvas",style:{cursor:"crosshair"}})),l.a.createElement("div",{className:"card"},l.a.createElement("span",null,l.a.createElement(s.a,{variant:"info",className:"padding",onClick:()=>{(()=>{if(o.clearRect(0,0,400,400),f)f=!1;else{f=!0;for(let e=0;e<=16;e++)o.beginPath(),o.moveTo(25*e,0),o.lineTo(25*e,400),o.strokeStyle="#000000",o.stroke();for(let e=0;e<=16;e++)o.beginPath(),o.moveTo(0,25*e),o.lineTo(400,25*e),a.strokeStyle="#000000",o.stroke()}})()}},"Toggle Grid"),l.a.createElement("span",{className:"clear"},l.a.createElement(s.a,{variant:"danger",className:"padding",onClick:()=>{p=(e=>(e.ctx.clearRect(0,0,e.canvasWidth,e.canvasHeight),"draw"))(d)}},"Clear")))))))};const v=document.getElementById("root");n.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(g,null)),v)},97:function(e,a,t){e.exports=t(268)}},[[97,1,2]]]);
//# sourceMappingURL=main.49152ce6.chunk.js.map