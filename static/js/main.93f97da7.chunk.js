(this["webpackJsonppixel-perfect"]=this["webpackJsonppixel-perfect"]||[]).push([[0],{267:function(e,a,t){},268:function(e,a,t){"use strict";t.r(a);var c=t(0),o=t.n(c),l=t(19),n=t.n(l),i=t(93),r=(t(267),t(271)),s=t(272);let f=[],d=[];const h=(e,a,t,c)=>{const o={x:Math.floor((e.pageX-(window.pageXOffset+a.canvas.getBoundingClientRect().left))/a.size),y:Math.floor((e.pageY-(window.pageYOffset+a.canvas.getBoundingClientRect().top))/a.size)};switch(t){case"fill":return o.x>=0&&o.x<a.canvasWidth&&o.y>=0&&o.y<a.canvasHeight&&c!==m(o,a)&&(f.push({color:m(o,a),prevColor:c,location:o,alpha:g(o,a),fill:!0}),p(o,c,a,a.canvasWidth/a.size,a.canvasHeight/a.size)),{colorSelect:c,tool:t};case"draw":return f.push({color:m(o,a),prevColor:c,location:o,alpha:g(o,a)}),a.ctx.fillStyle=c,a.ctx.fillRect(o.x*a.size,o.y*a.size,a.size,a.size),{colorSelect:c,tool:t};case"undo":if(f.length>0){if(f[f.length-1].fill)return f[f.length-1].alpha?p(f[f.length-1].location,f[f.length-1].color,a,a.canvasWidth/a.size,a.canvasHeight/a.size):p(f[f.length-1].location,"alpha",a,a.canvasWidth/a.size,a.canvasHeight/a.size),f.pop(),{colorSelect:c,tool:t="draw"};f[f.length-1].alpha?(a.ctx.fillStyle=f[f.length-1].color,a.ctx.fillRect(f[f.length-1].location.x*a.size,f[f.length-1].location.y*a.size,a.size,a.size),d.push({color:f[f.length-1].prevColor,location:f[f.length-1].location,alpha:f[f.length-1].alpha})):(a.ctx.clearRect(f[f.length-1].location.x*a.size,f[f.length-1].location.y*a.size,a.size,a.size),d.push({color:f[f.length-1].prevColor,location:f[f.length-1].location,alpha:0})),f.pop()}return{colorSelect:c,tool:t="draw"};case"redo":return d.length>0&&(a.ctx.fillStyle=d[d.length-1].color,a.ctx.fillRect(d[d.length-1].location.x*a.size,d[d.length-1].location.y*a.size,a.size,a.size),d.pop()),{colorSelect:c,tool:t="draw"};case"mirror":let e=a.canvasWidth/a.size-o.x-1;return f.push({color:m(o,a),prevColor:c,location:o}),f.push({color:m(o,a),prevColor:c,location:{x:e,y:o.y}}),a.ctx.fillStyle=c,a.ctx.fillRect(o.x*a.size,o.y*a.size,a.size,a.size),a.ctx.fillRect(e*a.size,o.y*a.size,a.size,a.size),{colorSelect:c,tool:t};case"erase":const l=g(o,a);return l&&(f.push({color:m(o,a),prevColor:c,location:o,alpha:l}),a.ctx.clearRect(o.x*a.size,o.y*a.size,a.size,a.size)),{colorSelect:c,tool:t};case"picker":return{colorSelect:c=g(o,a),tool:t="draw"};default:return a.ctx.clearRect(0,0,a.canvasWidth,a.canvasHeight),{colorSelect:c,tool:t}}},m=(e,a)=>{const t=a.ctx.getImageData(e.x*a.size,e.y*a.size,1,1).data;return"#"+("000000"+((e,a,t)=>{if(e>255||a>255||t>255)throw"Invalid color component";return(e<<16|a<<8|t).toString(16)})(t[0],t[1],t[2])).slice(-6)},g=(e,a)=>a.ctx.getImageData(e.x*a.size,e.y*a.size,1,1).data[3],p=(e,a,t,c,o)=>{let l=[];for(l.push(e),l.push(e),l.push(e),l.push(e);l.length>0;){l=l.filter((e,a,t)=>t.findIndex(a=>a.x===e.x&&a.y===e.y)===a);const n=l.shift(),i=m(n,t);"alpha"===a?t.ctx.clearRect(n.x*t.size,n.y*t.size,t.size,t.size):(t.ctx.fillStyle=a,t.ctx.fillRect(n.x*t.size,n.y*t.size,t.size,t.size));const r={x:n.x-1,y:n.y},s=m(r,t),f={x:n.x+1,y:n.y},d=m(f,t),h={x:n.x,y:n.y-1},g=m(h,t),p={x:n.x,y:n.y+1},u=m(p,t);r.x>=0&&s===i&&l.push(r),f.x<c&&e.x!==c&&d===i&&l.push(f),h.y>=0&&g===i&&l.push(h),p.y<o&&e.y!==o&&u===i&&l.push(p)}},u=["#ffebee","#ffcdd2","#ef9a9a","#e57373","#ef5350","#f44336","#e53935","#d32f2f","#c62828","#b71c1c","#fce4ec","#f8bbd0","#f48fb1","#f06292","#ec407a","#e91e63","#d81b60","#c2185b","#ad1457","#880e4f","#f3e5f5","#e1bee7","#ce93d8","#ba68c8","#ab47bc","#9c27b0","#8e24aa","#7b1fa2","#6a1b9a","#4a148c","#ede7f6","#d1c4e9","#b39ddb","#9575cd","#7e57c2","#673ab7","#5e35b1","#512da8","#4527a0","#311b92","#e8eaf6","#c5cae9","#9fa8da","#7986cb","#5c6bc0","#3f51b5","#3949ab","#303f9f","#283593","#1a237e","#e3f2fd","#bbdefb","#90caf9","#64b5f6","#42a5f5","#2196f3","#1e88e5","#1976d2","#1565c0","#0d47a1","#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b","#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064","#e0f2f1","#b2dfdb","#80cbc4","#4db6ac","#26a69a","#009688","#00897b","#00796b","#00695c","#004d40","#e8f5e9","#c8e6c9","#a5d6a7","#81c784","#66bb6a","#4caf50","#43a047","#388e3c","#2e7d32","#1b5e20","#f1f8e9","#dcedc8","#c5e1a5","#aed581","#9ccc65","#8bc34a","#7cb342","#689f38","#558b2f","#33691e","#f9fbe7","#f0f4c3","#e6ee9c","#dce775","#d4e157","#cddc39","#c0ca33","#afb42b","#9e9d24","#827717","#fffde7","#fff9c4","#fff59d","#fff176","#ffee58","#ffeb3b","#fdd835","#fbc02d","#f9a825","#f57f17","#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00","#fff3e0","#ffe0b2","#ffcc80","#ffb74d","#ffa726","#ff9800","#fb8c00","#f57c00","#ef6c00","#e65100","#fbe9e7","#ffccbc","#ffab91","#ff8a65","#ff7043","#ff5722","#f4511e","#e64a19","#d84315","#bf360c","#efebe9","#d7ccc8","#bcaaa4","#a1887f","#8d6e63","#795548","#6d4c41","#5d4037","#4e342e","#3e2723","#fafafa","#f5f5f5","#eeeeee","#e0e0e0","#bdbdbd","#9e9e9e","#757575","#616161","#424242","#212121","#eceff1","#cfd8dc","#b0bec5","#90a4ae","#78909c","#607d8b","#546e7a","#455a64","#37474f","#263238","#ffffff","#000000"];var b=()=>{window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimaitonFrame||function(e){window.setTimeout(e,1e3/60)};let e,a,t,c,l,n,f,d={},g=!1,p={},b="#ff0000",v="draw",x=!1;document.addEventListener("DOMContentLoaded",()=>{e=document.getElementById("canvas"),a=e.getContext("2d"),t=e.getBoundingClientRect(),c=document.getElementById("gridcanvas"),l=c.getContext("2d"),p={canvas:e,ctx:a,rect:t,canvasWidth:400,canvasHeight:400,size:25},n=window.pageYOffset+e.getBoundingClientRect().top,f=window.pageXOffset+e.getBoundingClientRect().left,e.addEventListener("touchstart",y,!1),e.addEventListener("touchend",z,!1),e.addEventListener("touchcancel",z,!1),e.addEventListener("touchmove",w,!1),e.addEventListener("mousedown",E,!1),e.addEventListener("mouseup",C,!1),e.addEventListener("mousemove",S,!1),e.addEventListener("mouseleave",C,!1)});const y=a=>{const t=a.touches[0],c={x:Math.floor((t.pageX-f)/25),y:Math.floor((t.pageY-n)/25)},o=m(c,p);if(console.log("touch start",c,window.scrollX,window.scrollY,e.offsetLeft,e.offsetTop,f,f),x=!0,o!==b||"erase"===v){d=c;const e=h(t,p,v,b);b=e.colorSelect,v=e.tool}},z=e=>{e.cancelable&&e.preventDefault(),x=!1},w=e=>{if(x){const a=e.touches[0],t={x:Math.floor((a.pageX-f)/25),y:Math.floor((a.pageY-n)/25)};if((m(t,p)!==b||"erase"===v)&&(d.x!==t.x||d.y!==t.y||"erase"===v)){d=t;const e=h(a,p,v,b);b=e.colorSelect,v=e.tool}}},E=e=>{const a={x:Math.floor((e.pageX-f)/25),y:Math.floor((e.pageY-n)/25)},t=m(a,p);if(x=!0,t!==b||"erase"===v){d=a;const t=h(e,p,v,b);b=t.colorSelect,v=t.tool}},C=e=>{x=!1},S=e=>{if(x){const a={x:Math.floor((e.pageX-f)/25),y:Math.floor((e.pageY-n)/25)};if((m(a,p)!==b||"erase"===v)&&(d.x!==a.x||d.y!==a.y||"erase"===v)){d=a;const t=h(e,p,v,b);b=t.colorSelect,v=t.tool}}};return o.a.createElement("div",null,o.a.createElement(r.a,{bg:"light",expand:"lg"},o.a.createElement(r.a.Brand,{href:"#home"},"Pixel Perfect by MemeLords"),o.a.createElement(r.a.Toggle,{"aria-controls":"basic-navbar-nav"})),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"leftcolumn"},o.a.createElement("div",{className:"card"},o.a.createElement(i.GithubPicker,{color:b,width:275,colors:u,triangle:"hide",onChangeComplete:e=>{b=e.hex}})),o.a.createElement("div",{className:"card"},o.a.createElement("span",null,o.a.createElement(s.a,{variant:"primary",className:"padding",onClick:()=>{v="draw"}},"Draw"),o.a.createElement(s.a,{variant:"danger",className:"padding",onClick:()=>{v="erase"}},"Erase"),o.a.createElement(s.a,{variant:"primary",className:"padding",onClick:()=>{v="fill"}},"Fill"),o.a.createElement(s.a,{variant:"primary",className:"padding",onClick:()=>{v="picker"}},"Picker")),o.a.createElement("span",null,o.a.createElement(s.a,{variant:"warning",className:"padding",onClick:e=>{(e=>{v="undo";const a=h(e,p,v,b);b=a.colorSelect,v=a.tool})(e)}},"Undo"),o.a.createElement(s.a,{variant:"success",className:"padding",onClick:e=>{(e=>{v="redo";const a=h(e,p,v,b);b=a.colorSelect,v=a.tool})(e)}},"Redo"),o.a.createElement("a",{id:"saveButton",download:"my-image"},o.a.createElement(s.a,{variant:"info",className:"padding",onClick:()=>{(()=>{const e=document.getElementById("canvas");document.getElementById("saveButton").href=e.toDataURL()})()}},"Save Image"))),o.a.createElement(s.a,{variant:"primary",className:"padding",onClick:()=>{v="mirror"}},"Mirror"),o.a.createElement(s.a,{variant:"primary",id:"testTouch",className:"padding",onClick:()=>{}},"Test Touch"))),o.a.createElement("div",{className:"rightcolumn"},o.a.createElement("div",{className:"card"},o.a.createElement("canvas",{width:400,height:400,id:"gridcanvas"}),o.a.createElement("canvas",{width:400,height:400,className:"app",id:"canvas",style:{cursor:"crosshair"}})),o.a.createElement("div",{className:"card"},o.a.createElement("span",null,o.a.createElement(s.a,{variant:"info",className:"padding",onClick:()=>{(()=>{if(l.clearRect(0,0,400,400),g)g=!1;else{g=!0;for(let e=0;e<=16;e++)l.beginPath(),l.moveTo(25*e,0),l.lineTo(25*e,400),l.strokeStyle="#000000",l.stroke();for(let e=0;e<=16;e++)l.beginPath(),l.moveTo(0,25*e),l.lineTo(400,25*e),a.strokeStyle="#000000",l.stroke()}})()}},"Toggle Grid"),o.a.createElement("span",{className:"clear"},o.a.createElement(s.a,{variant:"danger",className:"padding",onClick:()=>{v=(e=>(e.ctx.clearRect(0,0,e.canvasWidth,e.canvasHeight),"draw"))(p)}},"Clear")))))))};const v=document.getElementById("root");n.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null)),v)},97:function(e,a,t){e.exports=t(268)}},[[97,1,2]]]);
//# sourceMappingURL=main.93f97da7.chunk.js.map